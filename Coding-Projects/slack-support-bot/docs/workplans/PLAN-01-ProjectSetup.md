**Task ID**: `PLAN-01-ProjectSetup`

- **Problem Statement**: Initialize the Node.js project structure according to the defined layout, install essential base and development dependencies, configure basic linting/formatting, and set up foundational files like `.gitignore` and `.env.example`. This establishes the workspace for subsequent development tasks.
- **Components Involved**:
  - Filesystem directory structure
  - `package.json` (NPM package manifest)
  - `package-lock.json` (Dependency locking)
  - `.gitignore` (Git ignore rules)
  - `.eslintrc.json` (ESLint configuration)
  - `.prettierrc.json` (Prettier configuration)
  - `.env.example` (Environment variable template)
  - `node_modules/` (Installed dependencies)
- **Dependencies**:
  - Node.js (Version 18 LTS or higher recommended) installed in the development environment.
  - `npm` (Node Package Manager) installed (usually comes with Node.js).
  - Access to a terminal/shell in the intended root directory of the project.
- **Implementation Checklist**:

  - \[ ] Verify `node -v` and `npm -v` show appropriate versions (Node >= 18).
  - \[ ] Navigate to the chosen root directory for the project in your terminal.
  - \[ ] Create the main source directory: `mkdir src`
  - \[ ] Create the documentation directory: `mkdir Documentation`
  - \[ ] Create the plans subdirectory within Documentation: `mkdir Documentation/Plans`
  - \[ ] Create the scripts directory: `mkdir scripts`
  - \[ ] Create subdirectories within `src`:
    - `mkdir src/slack`
    - `mkdir src/rag`
    - `mkdir src/utils`
    - `mkdir src/config`
  - \[ ] Initialize the Node.js project: `npm init -y` (This creates `package.json`).
  - \[ ] Install runtime dependencies:
    ```bash
    npm install --save @slack/bolt dotenv langchain @langchain/google-vertexai googleapis @google-cloud/secret-manager @google-cloud/aiplatform @google-cloud/storage pdf-parse google-auth-library
    ```
    _(Note: Added `pdf-parse` and `google-auth-library` based on later plan needs)_
  - \[ ] Install development dependencies:
    ```bash
    npm install --save-dev eslint prettier eslint-config-airbnb-base eslint-plugin-import @babel/eslint-parser @babel/core # Added babel parser for potentially newer syntax features
    ```
    _(Note: Using airbnb-base, adjust if frontend JS is ever added. Added babel parser for better compatibility)_
  - \[ ] Create ESLint configuration file (`.eslintrc.json`):
    ```json
    {
      "env": {
        "es2021": true,
        "node": true
      },
      "extends": ["airbnb-base"],
      "parserOptions": {
        "ecmaVersion": "latest",
        "sourceType": "module",
        "requireConfigFile": false, // If not using Babel config file
        "babelOptions": {
          // Or configure Babel properly
          "presets": ["@babel/preset-env"]
        }
      },
      "parser": "@babel/eslint-parser", // Specify Babel parser
      "rules": {
        "no-console": "off", // Allow console logging for now
        "import/extensions": ["error", "ignorePackages", { "js": "never" }], // Allow imports without .js extension
        "no-unused-vars": ["warn"], // Warn instead of error for unused vars during dev
        "max-len": ["warn", { "code": 120 }], // Warn on long lines
        "object-curly-newline": "off" // Less strict about object formatting
      },
      "settings": {
        "import/resolver": {
          "node": {
            "extensions": [".js"]
          }
        }
      }
    }
    ```
  - \[ ] Create Prettier configuration file (`.prettierrc.json`):
    ```json
    {
      "semi": true,
      "trailingComma": "es5",
      "singleQuote": true,
      "printWidth": 80,
      "tabWidth": 2,
      "arrowParens": "always"
    }
    ```
  - \[ ] Create `.gitignore` file and add standard Node.js exclusions:

    ```gitignore
    # Dependencies
    /node_modules

    # Environment Variables
    .env
    *.env.local
    *.env.*.local

    # Logs
    logs
    *.log
    npm-debug.log*
    yarn-debug.log*
    yarn-error.log*
    lerna-debug.log*

    # Runtime data
    pids
    *.pid
    *.seed
    *.pid.lock

    # Directory for instrumented libs generated by jscoverage/JSCover
    lib-cov

    # Coverage directory used by tools like istanbul
    coverage
    *.lcov

    # nyc test coverage
    .nyc_output

    # Grunt intermediate storage (http://gruntjs.com/creating-plugins#storing-task-files)
    .grunt

    # Bower dependency directory (https://bower.io/)
    bower_components

    # node-waf configuration
    .lock-wscript

    # Compiled binary addons (https://nodejs.org/api/addons.html)
    build/Release

    # Optional npm cache directory
    .npm

    # Optional eslint cache
    .eslintcache

    # Optional REPL history
    .node_repl_history

    # Output of 'npm pack'
    *.tgz

    # Yarn Integrity file
    .yarn-integrity

    # dotenv environment variables file
    .env

    # Mac files
    .DS_Store

    # Windows thumbnail cache files
    Thumbs.db

    # Build output
    /dist
    /build

    # IDE files
    .vscode/
    .idea/
    *.iml
    *.suo
    ```

  - \[ ] Create `.env.example` file listing required environment variables (referencing `CONFIGURATION_GUIDE.md`):

    ```plaintext
    # Slack App Credentials
    SLACK_BOT_TOKEN=xoxb-...
    SLACK_SIGNING_SECRET=...
    # SLACK_APP_TOKEN=xapp-... # Uncomment if using Socket Mode

    # Slack Configuration
    TICKET_CHANNEL_ID=C...

    # GCP Configuration
    GCP_PROJECT_ID=your-gcp-project-id
    GCP_REGION=us-central1 # Or your deployment region

    # Vertex AI Configuration
    VERTEX_AI_INDEX_ID=YOUR_INDEX_ID_NUM
    VERTEX_AI_INDEX_ENDPOINT_ID=YOUR_ENDPOINT_ID_NUM
    VERTEX_AI_EMBEDDING_MODEL_NAME=textembedding-gecko@003 # Or desired model
    VERTEX_AI_LLM_MODEL_NAME=gemini-1.0-pro # Or desired model

    # Google Drive Configuration
    GOOGLE_DRIVE_FOLDER_ID=YOUR_DRIVE_FOLDER_ID
    # For local dev only - path to the Ingestion SA key JSON file
    # DRIVE_SERVICE_ACCOUNT_KEY_PATH=./path/to/your-ingestion-sa-key.json

    # Personality Configuration
    PERSONALITY_USER_ID=U... # Your Slack User ID for style examples

    # Deployment Configuration (Optional for local)
    # NODE_ENV=development # Set to 'production' in Cloud Run
    # PORT=3000 # Bolt default, Cloud Run overrides with 8080
    ```

    _(Note: Added specific model names, added comment for local SA key path)_

  - \[ ] Create placeholder `src/app.js` file:
    ```javascript
    console.log('Placeholder for src/app.js');
    // TODO: Implement Slack Bolt app initialization and event listeners
    ```
  - \[ ] Create placeholder `scripts/ingest.js` file:
    ```javascript
    console.log('Placeholder for scripts/ingest.js');
    // TODO: Implement runbook ingestion logic
    ```
  - \[ ] Run `npx eslint . --fix` to check and potentially fix initial linting issues.
  - \[ ] Run `npx prettier . --write` to format the code.
  - \[ ] Stage and commit initial project structure to Git (if using version control).

- **Verification Steps**:
  1.  Confirm all specified directories (`src`, `Documentation`, `scripts`, subdirectories) exist.
  2.  Verify `package.json` contains the correct runtime and development dependencies listed above.
  3.  Verify `package-lock.json` exists.
  4.  Verify `node_modules` directory exists and contains installed packages.
  5.  Verify `.gitignore`, `.eslintrc.json`, `.prettierrc.json`, and `.env.example` files exist with the specified content.
  6.  Verify placeholder files `src/app.js` and `scripts/ingest.js` exist.
  7.  Run `npm install` again; it should complete quickly without errors (verifying lock file).
  8.  Run `npx eslint .` - it should report no errors (or only expected warnings like unused vars in placeholder files).
  9.  Run `npx prettier . --check` - it should report no formatting issues.
- **Decision Authority**:
  - AI **can** choose specific versions of ESLint/Prettier plugins if compatible with the base configuration.
  - AI **can** make minor adjustments to ESLint rules if necessary to resolve conflicts, but should prioritize adherence to Airbnb-base. Document any significant deviations in Notes.
  - AI **cannot** change the core dependencies or overall project structure without user confirmation.
- **Questions/Uncertainties**:
  - _Blocking_: None.
  - _Non-blocking_: Specific Node.js version requirement (Assuming >= 18 LTS is acceptable). Exact ESLint/Prettier plugin versions (Assuming latest compatible versions are okay).
- **Acceptable Tradeoffs**:
  - ESLint configuration might need minor tweaks later as more complex code is added.
  - Placeholder files are minimal; detailed implementation comes in subsequent plans.
- **Status**: Not Started
- **Notes**:
  - _(AI should add notes here during implementation, e.g., "Used Node v18.17.0", "Installed specific plugin versions X, Y, Z", "Adjusted ESLint rule 'abc' due to conflict")_
